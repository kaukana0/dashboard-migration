# yaml schema v0.3.0 - for migration dashboard 

codeList:

  nativeB: &nativeB
    label: "Native-born"
    code: c_birthNAT        # this is for the selectbox entry key, which has to be unique
    originalCode: NAT       # this is in the dataset
  euB: &euB
    label: "Born in another EU country"
    code: c_birthEU_FOR
    originalCode: EU27_2020_FOR
  nonEuB: &nonEuB
    label: "Born in a non-EU country"
    code: c_birthNEU_FOR 
    originalCode: NEU27_2020_FOR

  nativeC: &nativeC
    label: "Nationals"
    code: citizenNAT
    originalCode: NAT       # it's the same as in nativeB but has to be a unique key in the selectbox, that's why an artificial code (not existing in dataset) is introduced
    selected: true
  euC: &euC
    label: "Citizens of another EU country"
    code: citizenEU_FOR
    originalCode: EU27_2020_FOR
    selected: true
  nonEuC: &nonEuC
    label: "Citizens of a non-EU country"
    code: citizenNEU_FOR
    originalCode: NEU27_2020_FOR
    selected: true

  bySelectGroupTitles: &bySelectGroupTitles
    c_birthNEU_FOR: By country of birth
    citizenNEU_FOR: By country of citizenship

  men: &men
    label: "Men"
    code: "M"
  women: &women
    label: "Women"
    code: "W"
  total: &total
    label: "Total"
    code: "T"
  18-24: &18-24
    label: "18 to 24 years"
    code: "Y18-24"
  15-74: &15-74
    label: "15 to 74 years"
    code: "Y15-64"
  20-64: &20-64
    label: "20 to 64 years"
    code: "Y20-24"
  15-29: &15-29
    label: "15 to 29 years"
    code: "Y25-59"
  18-54: &18-54
    label: "18 to 54 years"
    code: "Y18-54"
  16-44: &16-44
    label: "16 to 44 years"
    code: "Y16-44"
  45-64: &45-64
    label: "45 to 64 years"
    code: "Y45-64"
  65-over: &65-over
    label: "65 and years or over"
    code: "Y_GE65"
  freq: &freq
    label: "Time frequency Annual"
    code: "A"
  unit: &unit
    label: "% of Something"
    code: "PC"
  timeStart: &timeStart
    label: "start time"
    code: "2020"
  timeEnd: &timeEnd
    label: "end time"
    code: "2022"
  countries: &countries   #ISO 3166-1 alpha2
    - code: EU
      label: European Union
    - code: AT
      label: Austria
    - code: BE
      label: Belgium
    - code: BG
      label: Bulgaria
    - code: HR
      label: Croatia
    - code: CY
      label: Cyprus
    - code: CZ
      label: Czechia
    - code: DK
      label: Denmark
    - code: EE
      label: Estonia
    - code: FI
      label: Finland
    - code: FR
      label: France
    - code: DE
      label: Germany
    - code: EL
      label: Greece
    - code: HU
      label: Hungary
    - code: IE
      label: Ireland
    - code: IT
      label: Italy
    - code: LV
      label: Latvia
    - code: LT
      label: Lithuania
    - code: LU
      label: Luxembourg
    - code: MT
      label: Malta
    - code: NL
      label: Netherlands
    - code: PL
      label: Poland
    - code: PT
      label: Portugal
    - code: RO
      label: Romania
    - code: SK
      label: Slovakia
    - code: SI
      label: Slovenia
    - code: ES
      label: Spain
    - code: SE
      label: Sweden
    - code: IS
      label: Iceland
    - code: NO
      label: Norway
    - code: CH
      label: Switzerland
  countryGroups: [AT, IS]
  tenure1: &tenure1
    label: "Owner"
    code: "OWN"
  tenure2: &tenure2
    label: "Tenant"
    code: "RENT"


globals:
  baseURL: https://ec.europa.eu/eurostat/api/dissemination/statistics/1.0/data/
  ui:
    dropdown:
      geo: *countries
  byCitizenGroupTitle: "By country of citizenship"
  byBirthGroupTitle: "By country of birth"


# these are used as a base for each indicator in the indicators section
indicatorBase:
  dimensions:
    ui:               # UI elements reflect user selection for these
      dropdown:
        - Sex:        # in the REST request, this becomes the dimension
            elements:
              - *total    # and code becomes the code; label becomes dropdownbox item
              - *women
              - *men
        - Age:
            elements:
              - *15-74
              - *20-64
              - *15-29
          # note 1: in the implementation, bySelect is treated differently than any other dropdown
          # note 2: must correspond w/ magicStrings.mjs
        - Country of citizenship/birth:
            elements:
              - *nonEuC
              - *euC
              - *nativeC
              - *nonEuB
              - *euB
              - *nativeB
            groups:
              *bySelectGroupTitles
      range:
        - time:
          start: *timeStart
          end: *timeEnd
          # "singles:" could have precedence before start/end (not implemented)
          singles: [1907, 1914, 1938]
    nonUi:          # dimensions which are request-relevant and not represented by an ui element
      freq:
      - *freq
      unit:
      - *unit


# each indicator can overwrite the properties it "inherited" (via merge) from indicatorBase
indicators:

  - name: Migrant population share
    ignore: true
    category: Demography
    isInOverview: true
    articleLink: https://ec.europa.eu/eurostat/statistics-explained/index.php?title=Migration_and_migrant_population_statistics
    datasets:
      citizen:
        id: MIGR_POP1CTZ
        source: https://ec.europa.eu/eurostat/databrowser/bookmark/d30004bd-976c-40fe-bc40-e9a33abf1fc4?lang=en
      birth:
        id: MIGR_POP3CTB
        source: https://ec.europa.eu/eurostat/databrowser/bookmark/fb8d22a0-054b-4423-a3f9-ec79ee84c87a?lang=en
    dimensions:
      ui:
        dropdown:
          - Age:
              elements:
                - *15-74
                - label: "0 to 15 years"
                  code: "!DOESNTEXIST YET 4!"
                - *15-29
                - *20-64
                - label: "over 65 years"
                  code: "!DOESNTEXIST YET 5!"
      nonUi:
        unit:
        - label: "in [Thousends] of Something"
          code: "NR"

##########################################################

  - name: Employment rate
    category: Employment
    isInOverview: true
    articleLink: https://ec.europa.eu/eurostat/statistics-explained/index.php?title=Migrant_integration_statistics_%E2%80%93_labour_market_indicators
    datasets:
      citizen:
        id: LFSA_ERGAN
        source: https://ec.europa.eu/eurostat/databrowser/bookmark/1a912262-da95-49ac-a154-44479a7dae31?lang=en
      birth:
        id: LFSA_ERGACOB
        source: https://ec.europa.eu/eurostat/databrowser/bookmark/d642741b-30e8-45d3-b160-2abb17d8a2c9?lang=en

  - name: Activity rate
    category: Employment
    ignore: true

  - name: Unemployment rate
    category: Employment
    ignore: true

  - name: Long-term unemployment
    category: Employment
    ignore: true

  - name: Over-qualification rate
    category: Employment
    ignore: true

  - name: Share of self-employed in total employment
    category: Employment
    ignore: true

  - name: Share of self-employed in total employment
    category: Employment
    ignore: true

  - name: Share of employees with contract of limited duration in the total number of employees
    category: Employment
    ignore: true

  - name: Labour market slack
    category: Employment
    ignore: true

  - name: Newly employed
    category: Employment
    ignore: true

##########################################################

  - name: Highest educational attainment
    category: Education
    datasets:
      citizen:
        id: EDAT_LFS_9911
        source: https://ec.europa.eu/eurostat/databrowser/bookmark/72d853fc-1d1a-4ae0-8ee0-0a6a3320bbfe?lang=en
      birth:
        id: EDAT_LFS_9912
        source: https://ec.europa.eu/eurostat/databrowser/bookmark/9695b868-8edc-4f3a-82ff-4dbbf69e27d3?lang=en

  - name: Share of 30-34-year-olds with tertiary educational attainment
    category: Education
    ignore: true
    datasets:
      citizen:
        id: EDAT_LFS_9911__custom_4568481
        source: https://ec.europa.eu/eurostat/databrowser/bookmark/1ed97120-e2d0-4500-b93d-84f97f2962ce?lang=en
      birth:
        id: EDAT_LFS_9912__custom_4568588
        source: https://ec.europa.eu/eurostat/databrowser/bookmark/b4398174-ba0c-417e-a393-4343e9e50c3d?lang=en

  - name: Share of 18-24-year-olds leaving education and training early
    category: Education
    datasets:
      citizen:
        id: EDAT_LFSE_01
        source: https://ec.europa.eu/eurostat/databrowser/bookmark/3360a61f-9a96-4241-9477-b0998be03f06?lang=en
      birth:
        id: EDAT_LFSE_02
        source: https://ec.europa.eu/eurostat/databrowser/bookmark/605f367f-f9a2-49f8-9144-02d196ceddca?lang=en
    dimensions:
      ui:
        dropdown:
          - Age:
              elements:
                - *18-24

  - name: Participation rate in lifelong learning
    category: Education
    ignore: true

  - name: Young people neither in employment nor in education and training (NEET rate)
    category: Education
    ignore: true

  - name: Share of people with skills in the main host country language before migrating
    category: Education
    ignore: true

##########################################################

  - name: Share of adults at risk of poverty or social exclusion
    ignore: true
    category: Social inclusion
    isInOverview: true
    articleLink: https://ec.europa.eu/eurostat/statistics-explained/index.php?title=Migrant_integration_statistics_-_at_risk_of_poverty_and_social_exclusion
    datasets:
      citizen:
        id: ILC_PEPS05N
        source: https://ec.europa.eu/eurostat/databrowser/bookmark/e5355ba1-b4bf-4f2c-a5d6-4ca46cd88406?lang=en
      birth:
        id: ILC_PEPS06N
        source: https://ec.europa.eu/eurostat/databrowser/bookmark/7acca101-803d-44f2-85cd-834dbe582384?lang=en
    dimensions:
      ui:
        dropdown:
          - Age:
              elements:
                - *20-64

  - name: At-risk-of-poverty rate
    category: Social inclusion
    ignore: true

  - name: Median net income
    category: Social inclusion
    ignore: true

  - name: Child poverty rate (At-risk-of poverty rate for children)
    category: Social inclusion
    ignore: true

  - name: Share of adults living in households with very low work intensity
    category: Social inclusion
    ignore: true

  - name: Material and social deprivation rate
    category: Social inclusion
    ignore: true

  - name: In-work at-risk-of-poverty rate (persistent poverty risk)
    category: Social inclusion
    ignore: true

##########################################################

  - name: Home ownership rate
    category: Housing
    isInOverview: true
    articleLink: https://ec.europa.eu/eurostat/statistics-explained/index.php?title=Migrant_integration_statistics_-_housing
    datasets:
      citizen:
        id: ILC_LVPS15
        source: https://ec.europa.eu/eurostat/databrowser/bookmark/cf1f1df3-d356-451d-a0dc-9b38be4cd9c1?lang=en
      birth:
        id: ILC_LVPS16
        source: https://ec.europa.eu/eurostat/databrowser/bookmark/9aa7ad1a-8350-47cd-a9e8-83c8e0c59e23?lang=en
    dimensions:
      ui:
        dropdown:
          - Age:
              elements:
                - *18-54
          - Tenure:
              elements:
                - *tenure1

  - name: Housing cost overburden rate
    category: Housing
    ignore: true

  - name: Overcrowding rate
    category: Housing
    ignore: true

##########################################################

  - name: Share of people perceiving their health status as good or bad
    category: Health
    datasets:
      citizen:
        id: HLTH_SILC_24
        source: https://ec.europa.eu/eurostat/databrowser/bookmark/31210a4f-cdeb-4a2a-8422-6e63007b00d2?lang=en
      birth:
        id: HLTH_SILC_23
        source: https://ec.europa.eu/eurostat/databrowser/bookmark/81376051-e9b1-413f-bbbf-d64cd00dfd73?lang=en
    dimensions:
      ui:
        dropdown:
          - lev_perc:
              text: "Level of perception"
              elements:
                - label: Very bad or bad
                  code: B_VB
                - label: Fair
                  code: FAIR
                - label: Very good and good
                  code: VG_G
          - Age:
              elements:
              - *16-44
              - *45-64
              - *65-over


  - name: Share of people with self-reported unmet need for medical care
    category: Health
    ignore: true

  - name: Share of people with self-reported unmet needs for dental examination
    category: Health
    ignore: true

  - name: She of people having a long-standing illness or health problem
    category: Health
    ignore: true

  - name: Self-perceived long-standing limitations in usual activities due to health problem
    category: Health
    ignore: true

##########################################################

  - name: Naturalisation rate
    category: Active citizenship
    ignore: true

  - name: Share of third country nationals holding long-term residence permits
    category: Active citizenship
    ignore: true