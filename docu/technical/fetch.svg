<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="681px" preserveAspectRatio="none" style="width:830px;height:681px;" version="1.1" viewBox="0 0 830 681" width="830px" zoomAndPan="magnify"><defs><filter height="300%" id="fw8jxm1rg4qxn" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#fw8jxm1rg4qxn)" height="104.5313" style="stroke:#000000;stroke-width:2.0;" width="493.5" x="273" y="246.9609"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="27" x2="27" y1="88.2969" y2="597.6875"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="202.5" x2="202.5" y1="88.2969" y2="597.6875"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="319" x2="319" y1="88.2969" y2="597.6875"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="488" x2="488" y1="88.2969" y2="597.6875"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="577" x2="577" y1="88.2969" y2="597.6875"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="714.5" x2="714.5" y1="88.2969" y2="597.6875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="38" x="5" y="84.9951">Caller</text><ellipse cx="27" cy="15" fill="#FEFECE" filter="url(#fw8jxm1rg4qxn)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M27,23 L27,50 M14,31 L40,31 M27,50 L14,65 M27,50 L40,65 " fill="none" filter="url(#fw8jxm1rg4qxn)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="38" x="5" y="609.6826">Caller</text><ellipse cx="27" cy="622.9844" fill="#FEFECE" filter="url(#fw8jxm1rg4qxn)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M27,630.9844 L27,657.9844 M14,638.9844 L40,638.9844 M27,657.9844 L14,672.9844 M27,657.9844 L40,672.9844 " fill="none" filter="url(#fw8jxm1rg4qxn)" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FEFECE" filter="url(#fw8jxm1rg4qxn)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="67" x="167.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="53" x="174.5" y="72.9951">Fetcher</text><rect fill="#FEFECE" filter="url(#fw8jxm1rg4qxn)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="67" x="167.5" y="596.6875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="53" x="174.5" y="616.6826">Fetcher</text><rect fill="#FEFECE" filter="url(#fw8jxm1rg4qxn)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="68" x="283" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54" x="290" y="72.9951">Pipeline</text><rect fill="#FEFECE" filter="url(#fw8jxm1rg4qxn)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="68" x="283" y="596.6875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54" x="290" y="616.6826">Pipeline</text><rect fill="#FEFECE" filter="url(#fw8jxm1rg4qxn)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="58" x="457" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44" x="464" y="72.9951">Cache</text><rect fill="#FEFECE" filter="url(#fw8jxm1rg4qxn)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="58" x="457" y="596.6875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44" x="464" y="616.6826">Cache</text><rect fill="#FEFECE" filter="url(#fw8jxm1rg4qxn)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="92" x="529" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78" x="536" y="72.9951">Processors</text><rect fill="#FEFECE" filter="url(#fw8jxm1rg4qxn)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="92" x="529" y="596.6875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78" x="536" y="616.6826">Processors</text><rect fill="#FEFECE" filter="url(#fw8jxm1rg4qxn)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="79" x="673.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="65" x="680.5" y="72.9951">REST_API</text><rect fill="#FEFECE" filter="url(#fw8jxm1rg4qxn)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="79" x="673.5" y="596.6875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="65" x="680.5" y="616.6826">REST_API</text><polygon fill="#A80036" points="191,115.4297,201,119.4297,191,123.4297,195,119.4297" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="27" x2="197" y1="119.4297" y2="119.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="34" y="114.3638">fetch( fullURL, callback )</text><line style="stroke:#A80036;stroke-width:1.0;" x1="203" x2="245" y1="154.6289" y2="154.6289"/><line style="stroke:#A80036;stroke-width:1.0;" x1="245" x2="245" y1="154.6289" y2="167.6289"/><line style="stroke:#A80036;stroke-width:1.0;" x1="204" x2="245" y1="167.6289" y2="167.6289"/><polygon fill="#A80036" points="214,163.6289,204,167.6289,214,171.6289,210,167.6289" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="210" y="149.563">get strippedURL</text><path d="M324,132.4297 L324,172.4297 L819,172.4297 L819,142.4297 L809,132.4297 L324,132.4297 " fill="#FBFB77" filter="url(#fw8jxm1rg4qxn)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M809,132.4297 L809,142.4297 L819,142.4297 L809,132.4297 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="474" x="330" y="149.4966">The timeseries (line) data is a subset of the country-series-data (dot-plot).</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="373" x="330" y="164.6294">Remove geo and time param to fetch country-series-data.</text><polygon fill="#A80036" points="307,198.8281,317,202.8281,307,206.8281,311,202.8281" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="203" x2="313" y1="202.8281" y2="202.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="41" x="210" y="197.7622">invoke</text><polygon fill="#A80036" points="476,227.9609,486,231.9609,476,235.9609,480,231.9609" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="319" x2="482" y1="231.9609" y2="231.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145" x="326" y="226.895">get (key=strippedURL)</text><path d="M273,246.9609 L337,246.9609 L337,253.9609 L327,263.9609 L273,263.9609 L273,246.9609 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="104.5313" style="stroke:#000000;stroke-width:2.0;" width="493.5" x="273" y="246.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="288" y="260.0278">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="81" x="352" y="259.1714">[cache miss]</text><polygon fill="#A80036" points="703,281.2266,713,285.2266,703,289.2266,707,285.2266" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="319" x2="709" y1="285.2266" y2="285.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65" x="326" y="280.1606">fetch data</text><polygon fill="#A80036" points="330,310.3594,320,314.3594,330,318.3594,326,314.3594" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="324" x2="714" y1="314.3594" y2="314.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59" x="336" y="309.2935">json data</text><polygon fill="#A80036" points="476,339.4922,486,343.4922,476,347.4922,480,343.4922" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="319" x2="482" y1="343.4922" y2="343.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145" x="326" y="338.4263">put (key=strippedURL)</text><polygon fill="#A80036" points="330,375.625,320,379.625,330,383.625,326,379.625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="324" x2="487" y1="379.625" y2="379.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59" x="336" y="374.5591">json data</text><polygon fill="#A80036" points="565,404.7578,575,408.7578,565,412.7578,569,408.7578" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="319" x2="571" y1="408.7578" y2="408.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="144" x="326" y="403.6919">process (data, fullURL)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="577" x2="619" y1="483.2891" y2="483.2891"/><line style="stroke:#A80036;stroke-width:1.0;" x1="619" x2="619" y1="483.2891" y2="496.2891"/><line style="stroke:#A80036;stroke-width:1.0;" x1="578" x2="619" y1="496.2891" y2="496.2891"/><polygon fill="#A80036" points="588,492.2891,578,496.2891,588,500.2891,584,496.2891" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="584" y="432.8247">filter according</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113" x="584" y="447.9575">to fullURL params</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124" x="584" y="463.0903">and transform data</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116" x="584" y="478.2231">to suite billboardjs</text><polygon fill="#A80036" points="330,533.9883,320,537.9883,330,541.9883,326,537.9883" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="324" x2="576" y1="537.9883" y2="537.9883"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="184" x="336" y="532.9224">data prepared for billboard.js</text><path d="M582,509.2891 L582,549.2891 L821,549.2891 L821,519.2891 L811,509.2891 L582,509.2891 " fill="#FBFB77" filter="url(#fw8jxm1rg4qxn)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M811,509.2891 L811,519.2891 L821,519.2891 L811,509.2891 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="588" y="526.356">for timeseries,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="218" x="588" y="541.4888">it's actually less data then fetched</text><polygon fill="#A80036" points="38,575.6875,28,579.6875,38,583.6875,34,579.6875" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="32" x2="318" y1="579.6875" y2="579.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146" x="44" y="574.6216">invoke callback w/ data</text><!--MD5=[67657a4bda7b5522eae943b60023c741]
@startuml sequence

actor Caller
participant Fetcher
participant Pipeline
participant Cache
participant Processors
participant REST_API

Caller -> Fetcher: fetch( fullURL, callback )
Fetcher -> Fetcher: get strippedURL
note right
  The timeseries (line) data is a subset of the country-series-data (dot-plot).
  Remove geo and time param to fetch country-series-data.
end note
Fetcher -> Pipeline: invoke
Pipeline -> Cache: get (key=strippedURL)
alt cache miss
  Pipeline -> REST_API: fetch data
  Pipeline <- - REST_API: json data
  Pipeline -> Cache: put (key=strippedURL)
end
Pipeline <- Cache: json data
Pipeline -> Processors: process (data, fullURL)
Processors -> Processors: filter according\nto fullURL params\nand transform data\nto suite billboardjs
Processors - -> Pipeline: data prepared for billboard.js
note right
  for timeseries,
  it's actually less data then fetched
end note
Pipeline -> Caller: invoke callback w/ data

@enduml

PlantUML version 1.2021.00(Sun Jan 10 11:25:05 CET 2021)
(MIT source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: GB
--></g></svg>