<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="629px" preserveAspectRatio="none" style="width:769px;height:629px;" version="1.1" viewBox="0 0 769 629" width="769px" zoomAndPan="magnify"><defs><filter height="300%" id="f1wdknextlh6f0" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1wdknextlh6f0)" height="104.5313" style="stroke:#000000;stroke-width:2.0;" width="482.5" x="273" y="234.8281"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="27" x2="27" y1="88.2969" y2="545.2891"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="202.5" x2="202.5" y1="88.2969" y2="545.2891"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="319" x2="319" y1="88.2969" y2="545.2891"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="488" x2="488" y1="88.2969" y2="545.2891"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="577" x2="577" y1="88.2969" y2="545.2891"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="703.5" x2="703.5" y1="88.2969" y2="545.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="38" x="5" y="84.9951">Caller</text><ellipse cx="27" cy="15" fill="#FEFECE" filter="url(#f1wdknextlh6f0)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M27,23 L27,50 M14,31 L40,31 M27,50 L14,65 M27,50 L40,65 " fill="none" filter="url(#f1wdknextlh6f0)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="38" x="5" y="557.2842">Caller</text><ellipse cx="27" cy="570.5859" fill="#FEFECE" filter="url(#f1wdknextlh6f0)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M27,578.5859 L27,605.5859 M14,586.5859 L40,586.5859 M27,605.5859 L14,620.5859 M27,605.5859 L40,620.5859 " fill="none" filter="url(#f1wdknextlh6f0)" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FEFECE" filter="url(#f1wdknextlh6f0)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="67" x="167.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="53" x="174.5" y="72.9951">Fetcher</text><rect fill="#FEFECE" filter="url(#f1wdknextlh6f0)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="67" x="167.5" y="544.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="53" x="174.5" y="564.2842">Fetcher</text><rect fill="#FEFECE" filter="url(#f1wdknextlh6f0)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="68" x="283" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54" x="290" y="72.9951">Pipeline</text><rect fill="#FEFECE" filter="url(#f1wdknextlh6f0)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="68" x="283" y="544.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54" x="290" y="564.2842">Pipeline</text><rect fill="#FEFECE" filter="url(#f1wdknextlh6f0)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="58" x="457" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44" x="464" y="72.9951">Cache</text><rect fill="#FEFECE" filter="url(#f1wdknextlh6f0)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="58" x="457" y="544.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44" x="464" y="564.2842">Cache</text><rect fill="#FEFECE" filter="url(#f1wdknextlh6f0)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="92" x="529" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78" x="536" y="72.9951">Processors</text><rect fill="#FEFECE" filter="url(#f1wdknextlh6f0)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="92" x="529" y="544.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78" x="536" y="564.2842">Processors</text><rect fill="#FEFECE" filter="url(#f1wdknextlh6f0)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="79" x="662.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="65" x="669.5" y="72.9951">REST_API</text><rect fill="#FEFECE" filter="url(#f1wdknextlh6f0)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="79" x="662.5" y="544.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="65" x="669.5" y="564.2842">REST_API</text><polygon fill="#A80036" points="191,115.4297,201,119.4297,191,123.4297,195,119.4297" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="27" x2="197" y1="119.4297" y2="119.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="34" y="114.3638">fetch( fullURL, callback )</text><line style="stroke:#A80036;stroke-width:1.0;" x1="203" x2="245" y1="148.5625" y2="148.5625"/><line style="stroke:#A80036;stroke-width:1.0;" x1="245" x2="245" y1="148.5625" y2="161.5625"/><line style="stroke:#A80036;stroke-width:1.0;" x1="204" x2="245" y1="161.5625" y2="161.5625"/><polygon fill="#A80036" points="214,157.5625,204,161.5625,214,165.5625,210,161.5625" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="210" y="143.4966">get strippedURL</text><path d="M324,133.9297 L324,158.9297 L642,158.9297 L642,143.9297 L632,133.9297 L324,133.9297 " fill="#FBFB77" filter="url(#f1wdknextlh6f0)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M632,133.9297 L632,143.9297 L642,143.9297 L632,133.9297 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="297" x="330" y="150.9966">remove geo and time param to get more data</text><polygon fill="#A80036" points="307,186.6953,317,190.6953,307,194.6953,311,190.6953" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="203" x2="313" y1="190.6953" y2="190.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="41" x="210" y="185.6294">invoke</text><polygon fill="#A80036" points="476,215.8281,486,219.8281,476,223.8281,480,219.8281" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="319" x2="482" y1="219.8281" y2="219.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145" x="326" y="214.7622">get (key=strippedURL)</text><path d="M273,234.8281 L337,234.8281 L337,241.8281 L327,251.8281 L273,251.8281 L273,234.8281 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="104.5313" style="stroke:#000000;stroke-width:2.0;" width="482.5" x="273" y="234.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="288" y="247.895">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="81" x="352" y="247.0386">[cache miss]</text><polygon fill="#A80036" points="692,269.0938,702,273.0938,692,277.0938,696,273.0938" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="319" x2="698" y1="273.0938" y2="273.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65" x="326" y="268.0278">fetch data</text><polygon fill="#A80036" points="330,298.2266,320,302.2266,330,306.2266,326,302.2266" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="324" x2="703" y1="302.2266" y2="302.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59" x="336" y="297.1606">json data</text><polygon fill="#A80036" points="476,327.3594,486,331.3594,476,335.3594,480,331.3594" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="319" x2="482" y1="331.3594" y2="331.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145" x="326" y="326.2935">put (key=strippedURL)</text><polygon fill="#A80036" points="330,363.4922,320,367.4922,330,371.4922,326,367.4922" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="324" x2="487" y1="367.4922" y2="367.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59" x="336" y="362.4263">json data</text><polygon fill="#A80036" points="565,392.625,575,396.625,565,400.625,569,396.625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="319" x2="571" y1="396.625" y2="396.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="144" x="326" y="391.5591">process (data, fullURL)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="577" x2="619" y1="456.0234" y2="456.0234"/><line style="stroke:#A80036;stroke-width:1.0;" x1="619" x2="619" y1="456.0234" y2="469.0234"/><line style="stroke:#A80036;stroke-width:1.0;" x1="578" x2="619" y1="469.0234" y2="469.0234"/><polygon fill="#A80036" points="588,465.0234,578,469.0234,588,473.0234,584,469.0234" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="584" y="420.6919">filter according</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113" x="584" y="435.8247">to fullURL params</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="76" x="584" y="450.9575">and convert</text><polygon fill="#A80036" points="330,494.1563,320,498.1563,330,502.1563,326,498.1563" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="324" x2="576" y1="498.1563" y2="498.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="184" x="336" y="493.0903">data prepared for billboard.js</text><polygon fill="#A80036" points="38,523.2891,28,527.2891,38,531.2891,34,527.2891" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="32" x2="318" y1="527.2891" y2="527.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146" x="44" y="522.2231">invoke callback w/ data</text><!--MD5=[53b7ed3c8abd746f3879f34a97cc9a64]
@startuml sequence

actor Caller
participant Fetcher
participant Pipeline
participant Cache
participant Processors
participant REST_API

Caller -> Fetcher: fetch( fullURL, callback )
Fetcher -> Fetcher: get strippedURL
note right: remove geo and time param to get more data
Fetcher -> Pipeline: invoke
Pipeline -> Cache: get (key=strippedURL)
alt cache miss
  Pipeline -> REST_API: fetch data
  Pipeline <- - REST_API: json data
  Pipeline -> Cache: put (key=strippedURL)
end
Pipeline <- Cache: json data
Pipeline -> Processors: process (data, fullURL)
Processors -> Processors: filter according\nto fullURL params\nand convert
Processors - -> Pipeline: data prepared for billboard.js
Pipeline -> Caller: invoke callback w/ data

@enduml

PlantUML version 1.2021.00(Sun Jan 10 11:25:05 CET 2021)
(MIT source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: GB
--></g></svg>