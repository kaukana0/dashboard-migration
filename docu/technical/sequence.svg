<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1650px" preserveAspectRatio="none" style="width:1387px;height:1650px;" version="1.1" viewBox="0 0 1387 1650" width="1387px" zoomAndPan="magnify"><defs><filter height="300%" id="fnvblv756v6pr" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#fnvblv756v6pr)" height="228.1953" style="stroke:#000000;stroke-width:2.0;" width="801" x="247" y="410.7578"/><rect fill="#FFFFFF" filter="url(#fnvblv756v6pr)" height="451.125" style="stroke:#000000;stroke-width:2.0;" width="1039" x="237.5" y="1015.5469"/><rect fill="#FFFFFF" filter="url(#fnvblv756v6pr)" height="75.3984" style="stroke:#000000;stroke-width:2.0;" width="948" x="247.5" y="1326.0078"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="23" x2="23" y1="88.2969" y2="1565.9375"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="115.5" x2="115.5" y1="88.2969" y2="1565.9375"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="215.5" x2="215.5" y1="88.2969" y2="1565.9375"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="272.5" x2="272.5" y1="88.2969" y2="1565.9375"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="394.5" x2="394.5" y1="88.2969" y2="1565.9375"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="498.5" x2="498.5" y1="88.2969" y2="1565.9375"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="644.5" x2="644.5" y1="88.2969" y2="1565.9375"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="858" x2="858" y1="88.2969" y2="1565.9375"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="988" x2="988" y1="88.2969" y2="1565.9375"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1066" x2="1066" y1="88.2969" y2="1565.9375"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1149.5" x2="1149.5" y1="88.2969" y2="1565.9375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="5" y="84.9951">user</text><ellipse cx="23.5" cy="15" fill="#FEFECE" filter="url(#fnvblv756v6pr)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M23.5,23 L23.5,50 M10.5,31 L36.5,31 M23.5,50 L10.5,65 M23.5,50 L36.5,65 " fill="none" filter="url(#fnvblv756v6pr)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="5" y="1577.9326">user</text><ellipse cx="23.5" cy="1591.2344" fill="#FEFECE" filter="url(#fnvblv756v6pr)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M23.5,1599.2344 L23.5,1626.2344 M10.5,1607.2344 L36.5,1607.2344 M23.5,1626.2344 L10.5,1641.2344 M23.5,1626.2344 L36.5,1641.2344 " fill="none" filter="url(#fnvblv756v6pr)" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FEFECE" filter="url(#fnvblv756v6pr)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="46" x="90.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="32" x="97.5" y="72.9951">Main</text><rect fill="#FEFECE" filter="url(#fnvblv756v6pr)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="46" x="90.5" y="1564.9375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="32" x="97.5" y="1584.9326">Main</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="58" x="183.5" y="84.9951">YAMLcfg</text><ellipse cx="215.5" cy="56" fill="#FEFECE" filter="url(#fnvblv756v6pr)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><line style="stroke:#A80036;stroke-width:2.0;" x1="203.5" x2="227.5" y1="70" y2="70"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="58" x="183.5" y="1577.9326">YAMLcfg</text><ellipse cx="215.5" cy="1597.2344" fill="#FEFECE" filter="url(#fnvblv756v6pr)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><line style="stroke:#A80036;stroke-width:2.0;" x1="203.5" x2="227.5" y1="1611.2344" y2="1611.2344"/><rect fill="#FEFECE" filter="url(#fnvblv756v6pr)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="27" x="257.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="13" x="264.5" y="72.9951">Ui</text><rect fill="#FEFECE" filter="url(#fnvblv756v6pr)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="27" x="257.5" y="1564.9375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="13" x="264.5" y="1584.9326">Ui</text><rect fill="#FEFECE" filter="url(#fnvblv756v6pr)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="85" x="350.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="71" x="357.5" y="72.9951">MainMenu</text><rect fill="#FEFECE" filter="url(#fnvblv756v6pr)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="85" x="350.5" y="1564.9375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="71" x="357.5" y="1584.9326">MainMenu</text><rect fill="#FEFECE" filter="url(#fnvblv756v6pr)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="94" x="449.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="80" x="456.5" y="72.9951">CountryBox</text><rect fill="#FEFECE" filter="url(#fnvblv756v6pr)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="94" x="449.5" y="1564.9375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="80" x="456.5" y="1584.9326">CountryBox</text><rect fill="#FEFECE" filter="url(#fnvblv756v6pr)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="54" x="615.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40" x="622.5" y="72.9951">Cards</text><rect fill="#FEFECE" filter="url(#fnvblv756v6pr)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="54" x="615.5" y="1564.9375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40" x="622.5" y="1584.9326">Cards</text><rect fill="#FEFECE" filter="url(#fnvblv756v6pr)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="83" x="815" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69" x="822" y="72.9951">ChartCard</text><rect fill="#FEFECE" filter="url(#fnvblv756v6pr)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="83" x="815" y="1564.9375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69" x="822" y="1584.9326">ChartCard</text><rect fill="#FEFECE" filter="url(#fnvblv756v6pr)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="95" x="939" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81" x="946" y="72.9951">slotContent</text><rect fill="#FEFECE" filter="url(#fnvblv756v6pr)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="95" x="939" y="1564.9375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81" x="946" y="1584.9326">slotContent</text><rect fill="#FEFECE" filter="url(#fnvblv756v6pr)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="32" x="1048" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="18" x="1055" y="72.9951">Url</text><rect fill="#FEFECE" filter="url(#fnvblv756v6pr)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="32" x="1048" y="1564.9375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="18" x="1055" y="1584.9326">Url</text><rect fill="#FEFECE" filter="url(#fnvblv756v6pr)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="67" x="1114.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="53" x="1121.5" y="72.9951">Fetcher</text><rect fill="#FEFECE" filter="url(#fnvblv756v6pr)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="67" x="1114.5" y="1564.9375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="53" x="1121.5" y="1584.9326">Fetcher</text><rect fill="#EEEEEE" filter="url(#fnvblv756v6pr)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1380.5" x="0" y="118.8633"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1380.5" y1="118.8633" y2="118.8633"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1380.5" y1="121.8633" y2="121.8633"/><rect fill="#EEEEEE" filter="url(#fnvblv756v6pr)" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="42" x="669.25" y="108.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="23" x="675.25" y="124.3638">init</text><polygon fill="#A80036" points="103.5,158.5625,113.5,162.5625,103.5,166.5625,107.5,162.5625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="23.5" x2="109.5" y1="162.5625" y2="162.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="68" x="30.5" y="157.4966">open page</text><polygon fill="#A80036" points="203.5,217.9609,213.5,221.9609,203.5,225.9609,207.5,221.9609" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="115.5" x2="209.5" y1="221.9609" y2="221.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="57" x="122.5" y="186.6294">read and</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="48" x="126.5" y="201.7622">convert</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72" x="126.5" y="216.895">to JS object</text><polygon fill="#A80036" points="261,247.0938,271,251.0938,261,255.0938,265,251.0938" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="115.5" x2="267" y1="251.0938" y2="251.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="48" x="122.5" y="246.0278">init(cfg)</text><polygon fill="#A80036" points="383,276.2266,393,280.2266,383,284.2266,387,280.2266" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="273" x2="389" y1="280.2266" y2="280.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="98" x="280" y="275.1606">create from cfg</text><polygon fill="#A80036" points="486.5,305.3594,496.5,309.3594,486.5,313.3594,490.5,309.3594" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="273" x2="492.5" y1="309.3594" y2="309.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="70" x="280" y="304.2935">fill from cfg</text><polygon fill="#A80036" points="632.5,334.4922,642.5,338.4922,632.5,342.4922,636.5,338.4922" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="273" x2="638.5" y1="338.4922" y2="338.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="98" x="280" y="333.4263">create from cfg</text><line style="stroke:#A80036;stroke-width:1.0;" x1="644.5" x2="686.5" y1="382.7578" y2="382.7578"/><line style="stroke:#A80036;stroke-width:1.0;" x1="686.5" x2="686.5" y1="382.7578" y2="395.7578"/><line style="stroke:#A80036;stroke-width:1.0;" x1="645.5" x2="686.5" y1="395.7578" y2="395.7578"/><polygon fill="#A80036" points="655.5,391.7578,645.5,395.7578,655.5,399.7578,651.5,395.7578" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="183" x="651.5" y="362.5591">merge "indicatorBase" cfg w/</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="176" x="655.5" y="377.6919">each indivudial indicator cfg</text><path d="M247,410.7578 L324,410.7578 L324,417.7578 L314,427.7578 L247,427.7578 L247,410.7578 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="228.1953" style="stroke:#000000;stroke-width:2.0;" width="801" x="247" y="410.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="32" x="262" y="423.8247">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="80" x="339" y="422.9683">[∀ indicator]</text><polygon fill="#A80036" points="846.5,445.0234,856.5,449.0234,846.5,453.0234,850.5,449.0234" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="644.5" x2="852.5" y1="449.0234" y2="449.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="98" x="651.5" y="443.9575">create from cfg</text><polygon fill="#A80036" points="976.5,474.1563,986.5,478.1563,976.5,482.1563,980.5,478.1563" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="644.5" x2="982.5" y1="478.1563" y2="478.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="98" x="651.5" y="473.0903">create from cfg</text><polygon fill="#A80036" points="846.5,530.9883,856.5,534.9883,846.5,538.9883,850.5,534.9883" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="644.5" x2="852.5" y1="534.9883" y2="534.9883"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="651.5" y="514.7896">set attribute "urlfrag"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="166" x="655.5" y="529.9224">from cfg-property "non-ui"</text><path d="M257,491.1563 L257,546.1563 L635,546.1563 L635,501.1563 L625,491.1563 L257,491.1563 " fill="#FBFB77" filter="url(#fnvblv756v6pr)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M625,491.1563 L625,501.1563 L635,501.1563 L625,491.1563 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="254" x="263" y="508.2231">content is a row of select boxes; one for</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="277" x="263" y="523.356">every selectable dimension except country.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="357" x="263" y="538.4888">Each box gets an attribute: the dimension it represents.</text><polygon fill="#A80036" points="846.5,577.6875,856.5,581.6875,846.5,585.6875,850.5,581.6875" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="644.5" x2="852.5" y1="581.6875" y2="581.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116" x="651.5" y="576.6216">insert slot content</text><path d="M351,560.5547 L351,585.5547 L635,585.5547 L635,570.5547 L625,560.5547 L351,560.5547 " fill="#FBFB77" filter="url(#fnvblv756v6pr)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M625,560.5547 L625,570.5547 L635,570.5547 L625,560.5547 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="263" x="357" y="577.6216">card has 1 slot - it's a row above the title.</text><polygon fill="#A80036" points="846.5,626.9531,856.5,630.9531,846.5,634.9531,850.5,630.9531" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="644.5" x2="852.5" y1="630.9531" y2="630.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96" x="651.5" y="610.7544">register events</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="190" x="651.5" y="625.8872">"expanding" and "contracting"</text><polygon fill="#A80036" points="1054,663.0859,1064,667.0859,1054,671.0859,1058,667.0859" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="273" x2="1060" y1="667.0859" y2="667.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="194" x="280" y="662.02">set base URL as "global" prefix</text><polygon fill="#A80036" points="976.5,692.2188,986.5,696.2188,976.5,700.2188,980.5,696.2188" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="273" x2="982.5" y1="696.2188" y2="696.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="417" x="280" y="691.1528">set the same callback on each selectBox ("onSelectForOneCard")</text><polygon fill="#A80036" points="486.5,736.4844,496.5,740.4844,486.5,744.4844,490.5,740.4844" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="273" x2="492.5" y1="740.4844" y2="740.4844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="280" y="720.2856">set another callback</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="148" x="284" y="735.4185">("onSelectForAllCards")</text><rect fill="#EEEEEE" filter="url(#fnvblv756v6pr)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1380.5" x="0" y="769.0508"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1380.5" y1="769.0508" y2="769.0508"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1380.5" y1="772.0508" y2="772.0508"/><rect fill="#EEEEEE" filter="url(#fnvblv756v6pr)" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="282" x="549.25" y="758.4844"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="263" x="555.25" y="774.5513">interaction: click on card to expand</text><polygon fill="#A80036" points="846.5,808.75,856.5,812.75,846.5,816.75,850.5,812.75" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="23.5" x2="852.5" y1="812.75" y2="812.75"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="34" x="30.5" y="807.6841">clicks</text><line style="stroke:#A80036;stroke-width:1.0;" x1="858.5" x2="900.5" y1="841.8828" y2="841.8828"/><line style="stroke:#A80036;stroke-width:1.0;" x1="900.5" x2="900.5" y1="841.8828" y2="854.8828"/><line style="stroke:#A80036;stroke-width:1.0;" x1="859.5" x2="900.5" y1="854.8828" y2="854.8828"/><polygon fill="#A80036" points="869.5,850.8828,859.5,854.8828,869.5,858.8828,865.5,854.8828" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116" x="865.5" y="836.8169">rearrange content</text><polygon fill="#A80036" points="655.5,880.0156,645.5,884.0156,655.5,888.0156,651.5,884.0156" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="649.5" x2="857.5" y1="884.0156" y2="884.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="149" x="661.5" y="878.9497">emit event "expanding"</text><polygon fill="#A80036" points="509.5,924.2813,499.5,928.2813,509.5,932.2813,505.5,928.2813" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="503.5" x2="643.5" y1="928.2813" y2="928.2813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="515.5" y="908.0825">move from Main</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122" x="515.5" y="923.2153">HTML into card slot</text><path d="M62,899.582 L62,924.582 L489,924.582 L489,909.582 L479,899.582 L62,899.582 " fill="#FBFB77" filter="url(#fnvblv756v6pr)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M479,899.582 L479,909.582 L489,909.582 L479,899.582 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="406" x="68" y="916.6489">similarly, move from card slot to Main HTML on "contract" event</text><rect fill="#EEEEEE" filter="url(#fnvblv756v6pr)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1380.5" x="0" y="956.8477"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1380.5" y1="956.8477" y2="956.8477"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1380.5" y1="959.8477" y2="959.8477"/><rect fill="#EEEEEE" filter="url(#fnvblv756v6pr)" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="226" x="577.25" y="946.2813"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="207" x="583.25" y="962.3481">interaction: select a country</text><polygon fill="#A80036" points="284,996.5469,274,1000.5469,284,1004.5469,280,1000.5469" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="278" x2="497.5" y1="1000.5469" y2="1000.5469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96" x="290" y="995.481">invoke callback</text><path d="M237.5,1015.5469 L314.5,1015.5469 L314.5,1022.5469 L304.5,1032.5469 L237.5,1032.5469 L237.5,1015.5469 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="451.125" style="stroke:#000000;stroke-width:2.0;" width="1039" x="237.5" y="1015.5469"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="32" x="252.5" y="1028.6138">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="80" x="329.5" y="1027.7573">[∀ indicator]</text><polygon fill="#A80036" points="632.5,1049.8125,642.5,1053.8125,632.5,1057.8125,636.5,1053.8125" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="273" x2="638.5" y1="1053.8125" y2="1053.8125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="89" x="280" y="1048.7466">get selections</text><polygon fill="#A80036" points="976.5,1091.5117,986.5,1095.5117,976.5,1099.5117,980.5,1095.5117" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="644.5" x2="982.5" y1="1095.5117" y2="1095.5117"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="273" x="651.5" y="1090.4458">get selected and dimension from each box</text><path d="M993,1066.8125 L993,1106.8125 L1257,1106.8125 L1257,1076.8125 L1247,1066.8125 L993,1066.8125 " fill="#FBFB77" filter="url(#fnvblv756v6pr)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1247,1066.8125 L1247,1076.8125 L1257,1076.8125 L1247,1066.8125 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="243" x="999" y="1083.8794">for all that have "dimension" attribute;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="197" x="999" y="1099.0122">countryBox does not have that</text><polygon fill="#A80036" points="486.5,1133.2109,496.5,1137.2109,486.5,1141.2109,490.5,1137.2109" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="273" x2="492.5" y1="1137.2109" y2="1137.2109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119" x="280" y="1132.145">get selected items</text><polygon fill="#A80036" points="846.5,1162.3438,856.5,1166.3438,846.5,1170.3438,850.5,1166.3438" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="273" x2="852.5" y1="1166.3438" y2="1166.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135" x="280" y="1161.2778">get attribute "urlfrag"</text><polygon fill="#A80036" points="1054,1191.4766,1064,1195.4766,1054,1199.4766,1058,1195.4766" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="273" x2="1060" y1="1195.4766" y2="1195.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140" x="280" y="1190.4106">set "urlfrag" as postfix</text><polygon fill="#A80036" points="1054,1220.6094,1064,1224.6094,1054,1228.6094,1058,1224.6094" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="273" x2="1060" y1="1224.6094" y2="1224.6094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="188" x="280" y="1219.5435">build URL from collected infos</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1066" x2="1108" y1="1268.875" y2="1268.875"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1108" x2="1108" y1="1268.875" y2="1281.875"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1067" x2="1108" y1="1281.875" y2="1281.875"/><polygon fill="#A80036" points="1077,1277.875,1067,1281.875,1077,1285.875,1073,1281.875" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="1073" y="1248.6763">get URL</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="66" x="1077" y="1263.8091">fragments</text><polygon fill="#A80036" points="284,1307.0078,274,1311.0078,284,1315.0078,280,1311.0078" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="278" x2="1065" y1="1311.0078" y2="1311.0078"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="89" x="290" y="1305.9419">complete URL</text><path d="M247.5,1326.0078 L599.5,1326.0078 L599.5,1333.0078 L589.5,1343.0078 L247.5,1343.0078 L247.5,1326.0078 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="75.3984" style="stroke:#000000;stroke-width:2.0;" width="948" x="247.5" y="1326.0078"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="307" x="262.5" y="1339.0747">see sequence diagram "fetch" for details</text><polygon fill="#A80036" points="1138,1360.2734,1148,1364.2734,1138,1368.2734,1142,1364.2734" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="273" x2="1144" y1="1364.2734" y2="1364.2734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="280" y="1359.2075">fetch(URL, callback)</text><polygon fill="#A80036" points="284,1389.4063,274,1393.4063,284,1397.4063,280,1393.4063" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="278" x2="1149" y1="1393.4063" y2="1393.4063"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="269" x="290" y="1388.3403">invoke callback w/ billboard.js specific data</text><polygon fill="#A80036" points="632.5,1425.5391,642.5,1429.5391,632.5,1433.5391,636.5,1429.5391" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="273" x2="638.5" y1="1429.5391" y2="1429.5391"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="118" x="280" y="1424.4731">set data for 1 card</text><polygon fill="#A80036" points="846.5,1454.6719,856.5,1458.6719,846.5,1462.6719,850.5,1458.6719" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="644.5" x2="852.5" y1="1458.6719" y2="1458.6719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53" x="651.5" y="1453.606">set data</text><rect fill="#EEEEEE" filter="url(#fnvblv756v6pr)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1380.5" x="0" y="1494.2383"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1380.5" y1="1494.2383" y2="1494.2383"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1380.5" y1="1497.2383" y2="1497.2383"/><rect fill="#EEEEEE" filter="url(#fnvblv756v6pr)" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="461" x="459.75" y="1483.6719"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="442" x="465.75" y="1499.7388">interaction: select a dimension / time inside expanded card</text><polygon fill="#A80036" points="284,1538.9375,274,1542.9375,284,1546.9375,280,1542.9375" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="278" x2="987.5" y1="1542.9375" y2="1542.9375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96" x="290" y="1537.8716">invoke callback</text><path d="M993,1521.8047 L993,1546.8047 L1366,1546.8047 L1366,1531.8047 L1356,1521.8047 L993,1521.8047 " fill="#FBFB77" filter="url(#fnvblv756v6pr)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1356,1521.8047 L1356,1531.8047 L1366,1531.8047 L1356,1521.8047 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="352" x="999" y="1538.8716">rest is similar to loop content above, just for 1 indicator</text><!--MD5=[6f4404da4a4ba5166683ee64b2c89d8b]
@startuml sequence

actor user

participant Main
entity      YAMLcfg
participant Ui

== init ==

user -> Main: open page
Main -> YAMLcfg: read and \n convert \n to JS object
Main -> Ui: init(cfg)
Ui -> MainMenu: create from cfg
Ui -> CountryBox: fill from cfg
Ui -> Cards: create from cfg
Cards -> Cards: merge "indicatorBase" cfg w/ \n each indivudial indicator cfg
loop ∀ indicator
Cards -> ChartCard: create from cfg
Cards -> slotContent: create from cfg
Cards -> ChartCard: set attribute "urlfrag" \n from cfg-property "non-ui"
note left
content is a row of select boxes; one for
every selectable dimension except country.
Each box gets an attribute: the dimension it represents.
end note
Cards -> ChartCard: insert slot content
note left
card has 1 slot - it's a row above the title.
end note
Cards -> ChartCard: register events \n"expanding" and "contracting"
end
Ui -> Url: set base URL as "global" prefix
Ui -> slotContent: set the same callback on each selectBox ("onSelectForOneCard")
Ui -> CountryBox: set another callback \n ("onSelectForAllCards")

== interaction: click on card to expand ==

user -> ChartCard: clicks
ChartCard -> ChartCard: rearrange content
ChartCard - -> Cards: emit event "expanding"
Cards -> CountryBox: move from Main \nHTML into card slot

note left
similarly, move from card slot to Main HTML on "contract" event
end note

== interaction: select a country ==

CountryBox -> Ui: invoke callback
loop ∀ indicator
  Ui -> Cards: get selections
  Cards -> slotContent: get selected and dimension from each box
  note right
  for all that have "dimension" attribute;
  countryBox does not have that
  end note
  Ui -> CountryBox: get selected items
  Ui -> ChartCard: get attribute "urlfrag"
  Ui -> Url: set "urlfrag" as postfix
  Ui -> Url: build URL from collected infos
  Url -> Url: get URL \n fragments
  Url - -> Ui: complete URL
  group see sequence diagram "fetch" for details
    Ui -> Fetcher: fetch(URL, callback)
    Fetcher - -> Ui: invoke callback w/ billboard.js specific data
  end
  Ui -> Cards: set data for 1 card
  Cards -> ChartCard: set data
end

== interaction: select a dimension / time inside expanded card ==

slotContent -> Ui: invoke callback
note right: rest is similar to loop content above, just for 1 indicator

@enduml

PlantUML version 1.2021.00(Sun Jan 10 11:25:05 CET 2021)
(MIT source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: GB
--></g></svg>