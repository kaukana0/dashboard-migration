<?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1599px" preserveAspectRatio="none" style="width:1404px;height:1599px;background:#FFFFFF;" version="1.1" viewBox="0 0 1404 1599" width="1404px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="191.0625" style="stroke:#000000;stroke-width:1.5;" width="800.5" x="248" y="403.7578"/><rect fill="none" height="481.125" style="stroke:#000000;stroke-width:1.5;" width="1138" x="249" y="942.2813"/><rect fill="none" height="59.2656" style="stroke:#000000;stroke-width:1.5;" width="168" x="1185" y="1227.6094"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="23" x2="23" y1="81.2969" y2="1518.6719"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="114.5" x2="114.5" y1="81.2969" y2="1518.6719"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="215" x2="215" y1="81.2969" y2="1518.6719"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="272" x2="272" y1="81.2969" y2="1518.6719"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="396" x2="396" y1="81.2969" y2="1518.6719"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="498" x2="498" y1="81.2969" y2="1518.6719"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="643" x2="643" y1="81.2969" y2="1518.6719"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="857.5" x2="857.5" y1="81.2969" y2="1518.6719"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="987.5" x2="987.5" y1="81.2969" y2="1518.6719"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1064.5" x2="1064.5" y1="81.2969" y2="1518.6719"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1150" x2="1150" y1="81.2969" y2="1518.6719"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1231" x2="1231" y1="81.2969" y2="1518.6719"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1348" x2="1348" y1="81.2969" y2="1518.6719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30" x="5" y="77.9951">user</text><ellipse cx="23" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M23,21.5 L23,48.5 M10,29.5 L36,29.5 M23,48.5 L10,63.5 M23,48.5 L36,63.5 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30" x="5" y="1530.667">user</text><ellipse cx="23" cy="1542.4688" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M23,1550.4688 L23,1577.4688 M10,1558.4688 L36,1558.4688 M23,1577.4688 L10,1592.4688 M23,1577.4688 L36,1592.4688 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="47" x="91.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="33" x="98.5" y="69.9951">Main</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="47" x="91.5" y="1517.6719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="33" x="98.5" y="1537.667">Main</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="181" y="77.9951">YAMLcfg</text><ellipse cx="215" cy="49" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="203" x2="227" y1="63" y2="63"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="181" y="1530.667">YAMLcfg</text><ellipse cx="215" cy="1549.9688" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="203" x2="227" y1="1563.9688" y2="1563.9688"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="27" x="259" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="13" x="266" y="69.9951">Ui</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="27" x="259" y="1517.6719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="13" x="266" y="1537.667">Ui</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="85" x="354" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="71" x="361" y="69.9951">MainMenu</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="85" x="354" y="1517.6719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="71" x="361" y="1537.667">MainMenu</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="98" x="449" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="456" y="69.9951">CountryBox</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="98" x="449" y="1517.6719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="456" y="1537.667">CountryBox</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="54" x="616" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40" x="623" y="69.9951">Cards</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="54" x="616" y="1517.6719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40" x="623" y="1537.667">Cards</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="47" x="834.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="33" x="841.5" y="69.9951">Card</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="47" x="834.5" y="1517.6719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="33" x="841.5" y="1537.667">Card</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="101" x="937.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87" x="944.5" y="69.9951">slotContent</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="101" x="937.5" y="1517.6719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87" x="944.5" y="1537.667">slotContent</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="33" x="1048.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="19" x="1055.5" y="69.9951">Url</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="33" x="1048.5" y="1517.6719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="19" x="1055.5" y="1537.667">Url</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="70" x="1115" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="1122" y="69.9951">Fetcher</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="70" x="1115" y="1517.6719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="1122" y="1537.667">Fetcher</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="72" x="1195" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="58" x="1202" y="69.9951">Pipeline</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="72" x="1195" y="1517.6719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="58" x="1202" y="1537.667">Pipeline</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="58" x="1319" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44" x="1326" y="69.9951">Cache</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="58" x="1319" y="1517.6719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44" x="1326" y="1537.667">Cache</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1397" x="0" y="111.8633"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1397" y1="111.8633" y2="111.8633"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1397" y1="114.8633" y2="114.8633"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="44" x="676.5" y="101.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="25" x="682.5" y="117.3638">init</text><polygon fill="#181818" points="103,151.5625,113,155.5625,103,159.5625,107,155.5625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="23" x2="109" y1="155.5625" y2="155.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="68" x="30" y="150.4966">open page</text><polygon fill="#181818" points="203,210.9609,213,214.9609,203,218.9609,207,214.9609" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="115" x2="209" y1="214.9609" y2="214.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="57" x="122" y="179.6294">read and</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="49" x="126" y="194.7622">convert</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72" x="126" y="209.895">to JS object</text><polygon fill="#181818" points="260.5,240.0938,270.5,244.0938,260.5,248.0938,264.5,244.0938" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="115" x2="266.5" y1="244.0938" y2="244.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="49" x="122" y="239.0278">init(cfg)</text><polygon fill="#181818" points="384.5,269.2266,394.5,273.2266,384.5,277.2266,388.5,273.2266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="272.5" x2="390.5" y1="273.2266" y2="273.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100" x="279.5" y="268.1606">create from cfg</text><polygon fill="#181818" points="486,298.3594,496,302.3594,486,306.3594,490,302.3594" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="272.5" x2="492" y1="302.3594" y2="302.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="73" x="279.5" y="297.2935">fill from cfg</text><polygon fill="#181818" points="631,327.4922,641,331.4922,631,335.4922,635,331.4922" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="272.5" x2="637" y1="331.4922" y2="331.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100" x="279.5" y="326.4263">create from cfg</text><line style="stroke:#181818;stroke-width:1.0;" x1="643" x2="685" y1="375.7578" y2="375.7578"/><line style="stroke:#181818;stroke-width:1.0;" x1="685" x2="685" y1="375.7578" y2="388.7578"/><line style="stroke:#181818;stroke-width:1.0;" x1="644" x2="685" y1="388.7578" y2="388.7578"/><polygon fill="#181818" points="654,384.7578,644,388.7578,654,392.7578,650,388.7578" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="185" x="650" y="355.5591">merge "indicatorBase" cfg w/</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="178" x="654" y="370.6919">each indivudial indicator cfg</text><path d="M248,403.7578 L326,403.7578 L326,410.8906 L316,420.8906 L248,420.8906 L248,403.7578 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="191.0625" style="stroke:#000000;stroke-width:1.5;" width="800.5" x="248" y="403.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="33" x="263" y="416.8247">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="84" x="341" y="415.9683">[&#8704; indicator]</text><polygon fill="#181818" points="846,438.0234,856,442.0234,846,446.0234,850,442.0234" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="643" x2="852" y1="442.0234" y2="442.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100" x="650" y="436.9575">create from cfg</text><polygon fill="#181818" points="976,485.2891,986,489.2891,976,493.2891,980,489.2891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="643" x2="982" y1="489.2891" y2="489.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100" x="650" y="484.2231">create from cfg</text><path d="M258,455.0234 L258,510.0234 L638,510.0234 L638,465.0234 L628,455.0234 L258,455.0234 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M628,455.0234 L628,465.0234 L638,465.0234 L628,455.0234 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="260" x="264" y="472.0903">content is a row of select boxes; one for</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="281" x="264" y="487.2231">every selectable dimension except country.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="359" x="264" y="502.356">Each box gets an attribute: the dimension it represents.</text><polygon fill="#181818" points="846,535.5547,856,539.5547,846,543.5547,850,539.5547" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="643" x2="852" y1="539.5547" y2="539.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116" x="650" y="534.4888">insert slot content</text><path d="M351,520.4219 L351,545.4219 L638,545.4219 L638,530.4219 L628,520.4219 L351,520.4219 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M628,520.4219 L628,530.4219 L638,530.4219 L628,520.4219 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="266" x="357" y="537.4888">card has 1 slot - it's a row above the title.</text><polygon fill="#181818" points="846,582.8203,856,586.8203,846,590.8203,850,586.8203" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="643" x2="852" y1="586.8203" y2="586.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97" x="650" y="566.6216">register events</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="191" x="650" y="581.7544">"expanding" and "contracting"</text><polygon fill="#181818" points="976,618.9531,986,622.9531,976,626.9531,980,622.9531" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="272.5" x2="982" y1="622.9531" y2="622.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="416" x="279.5" y="617.8872">set the same callback on each selectBox ("onSelectForOneCard")</text><polygon fill="#181818" points="486,663.2188,496,667.2188,486,671.2188,490,667.2188" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="272.5" x2="492" y1="667.2188" y2="667.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="279.5" y="647.02">set another callback</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147" x="283.5" y="662.1528">("onSelectForAllCards")</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1397" x="0" y="695.7852"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1397" y1="695.7852" y2="695.7852"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1397" y1="698.7852" y2="698.7852"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="290" x="553.5" y="685.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="271" x="559.5" y="701.2856">interaction: click on card to expand</text><polygon fill="#181818" points="846,735.4844,856,739.4844,846,743.4844,850,739.4844" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="23" x2="852" y1="739.4844" y2="739.4844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="34" x="30" y="734.4185">clicks</text><line style="stroke:#181818;stroke-width:1.0;" x1="858" x2="900" y1="768.6172" y2="768.6172"/><line style="stroke:#181818;stroke-width:1.0;" x1="900" x2="900" y1="768.6172" y2="781.6172"/><line style="stroke:#181818;stroke-width:1.0;" x1="859" x2="900" y1="781.6172" y2="781.6172"/><polygon fill="#181818" points="869,777.6172,859,781.6172,869,785.6172,865,781.6172" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116" x="865" y="763.5513">rearrange content</text><polygon fill="#181818" points="654,806.75,644,810.75,654,814.75,650,810.75" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="648" x2="857" y1="810.75" y2="810.75"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151" x="660" y="805.6841">emit event "expanding"</text><polygon fill="#181818" points="509,851.0156,499,855.0156,509,859.0156,505,855.0156" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="503" x2="642" y1="855.0156" y2="855.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105" x="515" y="834.8169">move from Main</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="515" y="849.9497">HTML into card slot</text><path d="M64,828.3164 L64,853.3164 L493,853.3164 L493,838.3164 L483,828.3164 L64,828.3164 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M483,828.3164 L483,838.3164 L493,838.3164 L483,828.3164 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="408" x="70" y="845.3833">similarly, move from card slot to Main HTML on "contract" event</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1397" x="0" y="883.582"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1397" y1="883.582" y2="883.582"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1397" y1="886.582" y2="886.582"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="238" x="579.5" y="873.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="219" x="585.5" y="889.0825">interaction: select a country</text><polygon fill="#181818" points="283.5,923.2813,273.5,927.2813,283.5,931.2813,279.5,927.2813" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="277.5" x2="497" y1="927.2813" y2="927.2813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97" x="289.5" y="922.2153">invoke callback</text><path d="M249,942.2813 L327,942.2813 L327,949.4141 L317,959.4141 L249,959.4141 L249,942.2813 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="481.125" style="stroke:#000000;stroke-width:1.5;" width="1138" x="249" y="942.2813"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="33" x="264" y="955.3481">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="84" x="342" y="954.4917">[&#8704; indicator]</text><polygon fill="#181818" points="631,976.5469,641,980.5469,631,984.5469,635,980.5469" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="272.5" x2="637" y1="980.5469" y2="980.5469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="89" x="279.5" y="975.481">get selections</text><polygon fill="#181818" points="976,1005.6797,986,1009.6797,976,1013.6797,980,1009.6797" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="643" x2="982" y1="1009.6797" y2="1009.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="275" x="650" y="1004.6138">get selected and dimension from each box</text><polygon fill="#181818" points="1053,1034.8125,1063,1038.8125,1053,1042.8125,1057,1038.8125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="272.5" x2="1059" y1="1038.8125" y2="1038.8125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="201" x="279.5" y="1033.7466">build URL from given selections</text><line style="stroke:#181818;stroke-width:1.0;" x1="1065" x2="1107" y1="1083.0781" y2="1083.0781"/><line style="stroke:#181818;stroke-width:1.0;" x1="1107" x2="1107" y1="1083.0781" y2="1096.0781"/><line style="stroke:#181818;stroke-width:1.0;" x1="1066" x2="1107" y1="1096.0781" y2="1096.0781"/><polygon fill="#181818" points="1076,1092.0781,1066,1096.0781,1076,1100.0781,1072,1096.0781" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="1072" y="1062.8794">get URL</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="67" x="1076" y="1078.0122">fragments</text><polygon fill="#181818" points="283.5,1121.2109,273.5,1125.2109,283.5,1129.2109,279.5,1125.2109" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="277.5" x2="1064" y1="1125.2109" y2="1125.2109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="25" x="289.5" y="1120.145">URL</text><polygon fill="#181818" points="1138,1150.3438,1148,1154.3438,1138,1158.3438,1142,1154.3438" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="272.5" x2="1144" y1="1154.3438" y2="1154.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127" x="279.5" y="1149.2778">fetch(URL, callback)</text><polygon fill="#181818" points="1219,1179.4766,1229,1183.4766,1219,1187.4766,1223,1183.4766" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1150" x2="1225" y1="1183.4766" y2="1183.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="42" x="1157" y="1178.4106">invoke</text><polygon fill="#181818" points="1336,1208.6094,1346,1212.6094,1336,1216.6094,1340,1212.6094" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1231" x2="1342" y1="1212.6094" y2="1212.6094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="1238" y="1207.5435">try to get data</text><path d="M1185,1227.6094 L1251,1227.6094 L1251,1234.7422 L1241,1244.7422 L1185,1244.7422 L1185,1227.6094 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="59.2656" style="stroke:#000000;stroke-width:1.5;" width="168" x="1185" y="1227.6094"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="1200" y="1240.6763">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="82" x="1266" y="1239.8198">[cache miss]</text><line style="stroke:#181818;stroke-width:1.0;" x1="1231" x2="1273" y1="1265.875" y2="1265.875"/><line style="stroke:#181818;stroke-width:1.0;" x1="1273" x2="1273" y1="1265.875" y2="1278.875"/><line style="stroke:#181818;stroke-width:1.0;" x1="1232" x2="1273" y1="1278.875" y2="1278.875"/><polygon fill="#181818" points="1242,1274.875,1232,1278.875,1242,1282.875,1238,1278.875" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="66" x="1238" y="1260.8091">fetch data</text><line style="stroke:#181818;stroke-width:1.0;" x1="1231" x2="1273" y1="1315.0078" y2="1315.0078"/><line style="stroke:#181818;stroke-width:1.0;" x1="1273" x2="1273" y1="1315.0078" y2="1328.0078"/><line style="stroke:#181818;stroke-width:1.0;" x1="1232" x2="1273" y1="1328.0078" y2="1328.0078"/><polygon fill="#181818" points="1242,1324.0078,1232,1328.0078,1242,1332.0078,1238,1328.0078" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83" x="1238" y="1309.9419">process data</text><polygon fill="#181818" points="283.5,1353.1406,273.5,1357.1406,283.5,1361.1406,279.5,1357.1406" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="277.5" x2="1230" y1="1357.1406" y2="1357.1406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="219" x="289.5" y="1352.0747">invoke callback w/ processed data</text><polygon fill="#181818" points="631,1382.2734,641,1386.2734,631,1390.2734,635,1386.2734" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="272.5" x2="637" y1="1386.2734" y2="1386.2734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119" x="279.5" y="1381.2075">set data for 1 card</text><polygon fill="#181818" points="846,1411.4063,856,1415.4063,846,1419.4063,850,1415.4063" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="643" x2="852" y1="1415.4063" y2="1415.4063"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53" x="650" y="1410.3403">set data</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1397" x="0" y="1450.9727"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1397" y1="1450.9727" y2="1450.9727"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1397" y1="1453.9727" y2="1453.9727"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="467" x="465" y="1440.4063"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="448" x="471" y="1456.4731">interaction: select a dimension / time inside expanded card</text><polygon fill="#181818" points="283.5,1493.6719,273.5,1497.6719,283.5,1501.6719,279.5,1497.6719" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="277.5" x2="987" y1="1497.6719" y2="1497.6719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97" x="289.5" y="1492.606">invoke callback</text><path d="M993,1478.5391 L993,1503.5391 L1368,1503.5391 L1368,1488.5391 L1358,1478.5391 L993,1478.5391 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1358,1478.5391 L1358,1488.5391 L1368,1488.5391 L1358,1478.5391 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="354" x="999" y="1495.606">rest is similar to loop content above, just for 1 indicator</text><!--
  
@startuml sequence

actor user

participant Main
entity      YAMLcfg
participant Ui

== init ==

user -> Main: open page
Main -> YAMLcfg: read and \n convert \n to JS object
Main -> Ui: init(cfg)
Ui -> MainMenu: create from cfg
Ui -> CountryBox: fill from cfg
Ui -> Cards: create from cfg
Cards -> Cards: merge "indicatorBase" cfg w/ \n each indivudial indicator cfg
loop ∀ indicator
Cards -> Card: create from cfg
Cards -> slotContent: create from cfg
note left
content is a row of select boxes; one for
every selectable dimension except country.
Each box gets an attribute: the dimension it represents.
end note
Cards -> Card: insert slot content
note left
card has 1 slot - it's a row above the title.
end note
Cards -> Card: register events \n"expanding" and "contracting"
end
Ui -> slotContent: set the same callback on each selectBox ("onSelectForOneCard")
Ui -> CountryBox: set another callback \n ("onSelectForAllCards")

== interaction: click on card to expand ==

user -> Card: clicks
Card -> Card: rearrange content
Card --> Cards: emit event "expanding"
Cards -> CountryBox: move from Main \nHTML into card slot

note left
similarly, move from card slot to Main HTML on "contract" event
end note

== interaction: select a country ==

CountryBox -> Ui: invoke callback
loop ∀ indicator
  Ui -> Cards: get selections
  Cards -> slotContent: get selected and dimension from each box
  Ui -> Url: build URL from given selections
  Url -> Url: get URL \n fragments
  Url --> Ui: URL
  Ui -> Fetcher: fetch(URL, callback)
  Fetcher -> Pipeline: invoke
  Pipeline -> Cache: try to get data
  alt cache miss
    Pipeline -> Pipeline: fetch data
  end
  Pipeline -> Pipeline: process data
  Pipeline -> Ui: invoke callback w/ processed data
  Ui -> Cards: set data for 1 card
  Cards -> Card: set data
end

== interaction: select a dimension / time inside expanded card ==

slotContent -> Ui: invoke callback
note right: rest is similar to loop content above, just for 1 indicator

@enduml

--></g></svg>